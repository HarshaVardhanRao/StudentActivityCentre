{% extends 'base.html' %}

{% block title %}Welcome to MITS Student Activity Centre{% endblock %}

{% block content %}
<!-- Hero Section -->
<div class="row align-items-center mb-5 p-5" style="min-height: 50vh;">
    <div class="col-lg-6 mb-4 mb-lg-0">
        <h1 class="display-4 fw-bold mb-3">Welcome to the MITS Student Activity Centre</h1>
        <p class="lead mb-4">Discover events, join clubs, and connect with the vibrant student community at MITS. Log in to access your personalized dashboard, manage your activities, and stay updated with the latest happenings on campus.</p>
        <div class="mb-3">
            <a href="{% url 'login' %}" class="btn btn-primary btn-lg me-2">Login</a>
            <a href="{% url 'event_list' %}" class="btn btn-outline-primary btn-lg">Browse Events</a>
        </div>
        <ul class="list-unstyled mt-4">
            <li><i class="bi bi-calendar-event text-primary"></i> Explore upcoming events</li>
            <li><i class="bi bi-people text-success"></i> Join and manage clubs</li>
            <li><i class="bi bi-bar-chart text-info"></i> View reports and analytics</li>
            <li><i class="bi bi-bell text-warning"></i> Stay notified about campus activities</li>
        </ul>
    </div>
    <div class="col-lg-6 text-center">
        <img src="https://cdn.pixabay.com/photo/2017/01/31/13/14/people-2029367_1280.png" alt="Student Activities" class="img-fluid rounded shadow" style="max-height: 400px;">
    </div>
</div>

<!-- Statistics Section -->
<div class="row mb-5">
    <div class="col-md-3 text-center mb-3">
        <div class="card border-0 bg-primary text-white">
            <div class="card-body">
                <h3>{{ stats.total_events }}</h3>
                <p class="mb-0">Total Events</p>
            </div>
        </div>
    </div>
    <div class="col-md-3 text-center mb-3">
        <div class="card border-0 bg-success text-white">
            <div class="card-body">
                <h3>{{ stats.total_clubs }}</h3>
                <p class="mb-0">Active Clubs</p>
            </div>
        </div>
    </div>
    <div class="col-md-3 text-center mb-3">
        <div class="card border-0 bg-info text-white">
            <div class="card-body">
                <h3>{{ upcoming_events.count }}</h3>
                <p class="mb-0">Upcoming Events</p>
            </div>
        </div>
    </div>
    <div class="col-md-3 text-center mb-3">
        <div class="card border-0 bg-warning text-white">
            <div class="card-body">
                <h3>{{ completed_events.count }}</h3>
                <p class="mb-0">Completed Events</p>
            </div>
        </div>
    </div>
</div>

<!-- Upcoming Events Section -->
<div class="row mb-5">
    <div class="col-12">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2><i class="bi bi-calendar-plus text-primary"></i> Upcoming Events</h2>
            <div>
                <a href="{% url 'calendar_view' %}" class="btn btn-outline-info me-2">
                    <i class="bi bi-calendar3"></i> View Calendar
                </a>
                <a href="{% url 'event_list' %}" class="btn btn-outline-primary">View All Events</a>
            </div>
        </div>
        {% if upcoming_events %}
            <div class="row">
                {% for event in upcoming_events %}
                    <div class="col-md-6 col-lg-4 mb-4">
                        <div class="card h-100 shadow-sm">
                            <div class="card-header bg-light">
                                <div class="d-flex justify-content-between align-items-center">
                                    <small class="text-muted">{{ event.club.name }}</small>
                                    <span class="badge 
                                        {% if event.status == 'APPROVED' %}bg-success
                                        {% elif event.status == 'PENDING' %}bg-warning
                                        {% else %}bg-secondary{% endif %}">
                                        {{ event.get_status_display }}
                                    </span>
                                </div>
                            </div>
                            <div class="card-body">
                                <h5 class="card-title">{{ event.name }}</h5>
                                <p class="card-text">{{ event.description|truncatewords:15 }}</p>
                                <div class="small text-muted">
                                    <div><i class="bi bi-calendar-event"></i> {{ event.date_time|date:"M d, Y" }} at {{ event.date_time|time:"g:i A" }}</div>
                                    <div><i class="bi bi-geo-alt"></i> {{ event.venue }}</div>
                                    <div><i class="bi bi-tag"></i> {{ event.event_type }}</div>
                                    <div><i class="bi bi-people"></i> {{ event.registration_count|default:0 }} students registered</div>
                                </div>
                            </div>
                            <div class="card-footer bg-transparent">
                                <div class="d-grid gap-2">
                                    <a href="{% url 'event_detail' event.id %}" class="btn btn-sm btn-outline-primary">View Details</a>
                                </div>
                                <div class="text-center mt-2">
                                    <small class="text-muted">
                                        <a href="{% url 'login' %}" class="text-decoration-none">Login to register for events</a>
                                    </small>
                                </div>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="text-center py-4">
                <i class="bi bi-calendar-x" style="font-size: 3rem; color: #6c757d;"></i>
                <h4 class="text-muted mt-3">No Upcoming Events</h4>
                <p class="text-muted">Check back later for new events!</p>
            </div>
        {% endif %}
    </div>
</div>

<!-- Completed Events Section -->
<div class="row mb-5">
    <div class="col-12">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2><i class="bi bi-calendar-check text-success"></i> Recent Completed Events</h2>
            <a href="{% url 'event_list' %}?status=COMPLETED" class="btn btn-outline-success">View All Completed</a>
        </div>
        {% if completed_events %}
            <div class="row">
                {% for event in completed_events %}
                    <div class="col-md-6 col-lg-4 mb-4">
                        <div class="card h-100 shadow-sm">
                            <div class="card-header bg-light">
                                <div class="d-flex justify-content-between align-items-center">
                                    <small class="text-muted">{{ event.club.name }}</small>
                                    <span class="badge bg-success">Completed</span>
                                </div>
                            </div>
                            <div class="card-body">
                                <h5 class="card-title">{{ event.name }}</h5>
                                <p class="card-text">{{ event.description|truncatewords:15 }}</p>
                                <div class="small text-muted">
                                    <div><i class="bi bi-calendar-event"></i> {{ event.date_time|date:"M d, Y" }}</div>
                                    <div><i class="bi bi-geo-alt"></i> {{ event.venue }}</div>
                                    <div><i class="bi bi-tag"></i> {{ event.event_type }}</div>
                                </div>
                            </div>
                            <div class="card-footer bg-transparent">
                                <a href="{% url 'event_detail' event.id %}" class="btn btn-sm btn-outline-success w-100">View Details</a>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="text-center py-4">
                <i class="bi bi-calendar-check" style="font-size: 3rem; color: #6c757d;"></i>
                <h4 class="text-muted mt-3">No Completed Events</h4>
                <p class="text-muted">Past events will appear here once they're completed.</p>
            </div>
        {% endif %}
    </div>
</div>

<!-- Calendar Showcase Section -->
<div class="row mb-5">
    <div class="col-12">
        <div class="card bg-light">
            <div class="card-body text-center py-5">
                <i class="bi bi-calendar3" style="font-size: 4rem; color: #0d6efd;"></i>
                <h3 class="mt-3">Stay Organized with Our Event Calendar</h3>
                <p class="lead text-muted">View all approved events in an easy-to-read calendar format. See what's happening each day and plan your schedule accordingly.</p>
                <div class="row mt-4">
                    <div class="col-md-4">
                        <i class="bi bi-eye text-primary"></i>
                        <h5>View Events</h5>
                        <p class="small text-muted">See all approved events without logging in</p>
                    </div>
                    <div class="col-md-4">
                        <i class="bi bi-calendar-date text-success"></i>
                        <h5>Multiple Events Per Day</h5>
                        <p class="small text-muted">Calendar supports multiple events on the same day</p>
                    </div>
                    <div class="col-md-4">
                        <i class="bi bi-person-plus text-info"></i>
                        <h5>Register for Events</h5>
                        <p class="small text-muted">Login to register for events directly from calendar</p>
                    </div>
                </div>
                <div class="mt-4">
                    <a href="{% url 'calendar_view' %}" class="btn btn-primary btn-lg me-3">
                        <i class="bi bi-calendar3"></i> View Calendar
                    </a>
                    {% if not user.is_authenticated %}
                        <a href="{% url 'login' %}" class="btn btn-outline-primary btn-lg">
                            <i class="bi bi-box-arrow-in-right"></i> Login to Register
                        </a>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Featured Clubs Section -->
<div class="row">
    <div class="col-12">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2><i class="bi bi-people text-info"></i> Featured Clubs</h2>
            <a href="{% url 'club_list' %}" class="btn btn-outline-info">View All Clubs</a>
        </div>
        {% if clubs %}
            <div class="row">
                {% for club in clubs %}
                    <div class="col-md-6 col-lg-3 mb-4">
                        <div class="card h-100 shadow-sm">
                            <div class="card-body text-center">
                                <h5 class="card-title">{{ club.name }}</h5>
                                <p class="card-text small">{{ club.description|truncatewords:10 }}</p>
                                <div class="small text-muted">
                                    <div>{{ club.members.count }} members</div>
                                    <div>{{ club.events.count }} events</div>
                                </div>
                            </div>
                            <div class="card-footer bg-transparent">
                                <a href="{% url 'club_detail' club.id %}" class="btn btn-sm btn-outline-info w-100">Learn More</a>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="text-center py-4">
                <i class="bi bi-people" style="font-size: 3rem; color: #6c757d;"></i>
                <h4 class="text-muted mt-3">No Clubs Available</h4>
                <p class="text-muted">Clubs will appear here once they're created.</p>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}