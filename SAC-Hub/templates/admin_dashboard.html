{% extends 'base.html' %}
{% block title %}SAC Dashboard - Event Management{% endblock %}
{% block content %}
<!-- Include Sidebar -->
{% include 'includes/sidebar.html' %}

<!-- Main Content Area -->
<div class="md:ml-64 min-h-screen bg-gradient-to-b from-gray-50 to-gray-100">
	<div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8">

		<!-- Header Section -->
		<div class="mb-8">
			<h1 class="text-4xl font-bold text-gray-900 mb-2">SAC Dashboard</h1>
			<p class="text-gray-600">Manage events, approvals, and student activities</p>
		</div>

		{% if error_message %}
		<div class="bg-red-50 border-l-4 border-red-500 p-4 mb-6 rounded-r-lg">
			<div class="flex">
				<div class="flex-shrink-0">
					<svg class="h-5 w-5 text-red-400" viewBox="0 0 20 20" fill="currentColor">
						<path fill-rule="evenodd"
							d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"
							clip-rule="evenodd" />
					</svg>
				</div>
				<div class="ml-3">
					<p class="text-sm font-medium text-red-800">{{ error_message }}</p>
				</div>
			</div>
		</div>
		{% else %}

		<!-- Statistics Cards -->
		<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
			<!-- Pending Events Card -->
			<div
				class="bg-white rounded-xl shadow-md border-l-4 border-yellow-500 overflow-hidden hover:shadow-lg transition-shadow">
				<div class="p-6">
					<div class="flex items-center justify-between">
						<div>
							<p class="text-gray-500 text-sm font-medium">Pending Approval</p>
							<p class="text-3xl font-bold text-gray-900 mt-2">{{ pending_events|length }}</p>
							<p class="text-xs text-gray-400 mt-2">Awaiting review</p>
						</div>
						<div class="bg-yellow-100 p-3 rounded-lg">
							<svg class="w-8 h-8 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
									d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
							</svg>
						</div>
					</div>
				</div>
			</div>

			<!-- Approved Events Card -->
			<div
				class="bg-white rounded-xl shadow-md border-l-4 border-green-500 overflow-hidden hover:shadow-lg transition-shadow">
				<div class="p-6">
					<div class="flex items-center justify-between">
						<div>
							<p class="text-gray-500 text-sm font-medium">Approved Events</p>
							<p class="text-3xl font-bold text-gray-900 mt-2">{{ approved_events|length }}</p>
							<p class="text-xs text-gray-400 mt-2">Ready to execute</p>
						</div>
						<div class="bg-green-100 p-3 rounded-lg">
							<svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
									d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
							</svg>
						</div>
					</div>
				</div>
			</div>

			<!-- Completed Events Card -->
			<div
				class="bg-white rounded-xl shadow-md border-l-4 border-blue-500 overflow-hidden hover:shadow-lg transition-shadow">
				<div class="p-6">
					<div class="flex items-center justify-between">
						<div>
							<p class="text-gray-500 text-sm font-medium">Completed Events</p>
							<p class="text-3xl font-bold text-gray-900 mt-2">{{ completed_events|length }}</p>
							<p class="text-xs text-gray-400 mt-2">Successfully executed</p>
						</div>
						<div class="bg-blue-100 p-3 rounded-lg">
							<svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
									d="M13 10V3L4 14h7v7l9-11h-7z" />
							</svg>
						</div>
					</div>
				</div>
			</div>

			<!-- Rejected Events Card -->
			<div
				class="bg-white rounded-xl shadow-md border-l-4 border-red-500 overflow-hidden hover:shadow-lg transition-shadow">
				<div class="p-6">
					<div class="flex items-center justify-between">
						<div>
							<p class="text-gray-500 text-sm font-medium">Rejected Events</p>
							<p class="text-3xl font-bold text-gray-900 mt-2">{{ rejected_events|length }}</p>
							<p class="text-xs text-gray-400 mt-2">Not approved</p>
						</div>
						<div class="bg-red-100 p-3 rounded-lg">
							<svg class="w-8 h-8 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
									d="M6 18L18 6M6 6l12 12" />
							</svg>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Main Content - Tabs for Event Status -->
		<div class="mb-8">
			<div class="bg-white rounded-xl shadow-md overflow-hidden">
				<!-- Tab Navigation -->
				<div class="flex border-b border-gray-200 bg-gray-50 overflow-x-auto">
					<button onclick="switchTab('pending')"
						class="tab-btn active px-6 py-4 font-medium text-sm text-yellow-600 border-b-2 border-yellow-600 bg-white whitespace-nowrap">
						<svg class="inline w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
							<path d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 002 0V6z" />
						</svg>
						Pending Approval ({{ pending_events|length }})
					</button>
					<button onclick="switchTab('approved')"
						class="tab-btn px-6 py-4 font-medium text-sm text-gray-500 hover:text-gray-700 whitespace-nowrap">
						<svg class="inline w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
							<path fill-rule="evenodd"
								d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
								clip-rule="evenodd" />
						</svg>
						Approved ({{ approved_events|length }})
					</button>
					<button onclick="switchTab('completed')"
						class="tab-btn px-6 py-4 font-medium text-sm text-gray-500 hover:text-gray-700 whitespace-nowrap">
						<svg class="inline w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
							<path
								d="M11 3a1 1 0 10-2 0v1a1 1 0 102 0V3zM15.657 5.757a1 1 0 00-1.414-1.414l-.707.707a1 1 0 001.414 1.414l.707-.707zM18 10a1 1 0 01-1 1h-1a1 1 0 110-2h1a1 1 0 011 1zM15.657 14.243a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414l.707.707zM11 17a1 1 0 102 0v-1a1 1 0 10-2 0v1zM5.757 15.657a1 1 0 00-1.414-1.414l-.707.707a1 1 0 001.414 1.414l.707-.707zM2 10a1 1 0 01 1 1h1a1 1 0 110-2H3a1 1 0 00-1 1zM5.757 4.343A1 1 0 007.171 2.93l-.707-.707A1 1 0 004.343 5.05l.707-.707z" />
						</svg>
						Completed ({{ completed_events|length }})
					</button>
					<button onclick="switchTab('rejected')"
						class="tab-btn px-6 py-4 font-medium text-sm text-gray-500 hover:text-gray-700 whitespace-nowrap">
						<svg class="inline w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
							<path fill-rule="evenodd"
								d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
								clip-rule="evenodd" />
						</svg>
						Rejected ({{ rejected_events|length }})
					</button>
				</div>

				<!-- Tab Content -->
				<div id="pending" class="tab-content">
					{% if pending_events %}
					<div class="overflow-x-auto">
						<table class="w-full">
							<thead class="bg-yellow-50 border-b border-gray-200">
								<tr>
									<th
										class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">
										Event Name</th>
									<th
										class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">
										Organization</th>
									<th
										class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">
										Date & Time</th>
									<th
										class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">
										Organizer</th>
									<th
										class="px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider">
										Actions</th>
								</tr>
							</thead>
							<tbody class="divide-y divide-gray-200">
								{% for event in pending_events %}
								<tr class="hover:bg-yellow-50 transition-colors">
									<td class="px-6 py-4 text-sm font-medium text-gray-900">{{ event.name }}</td>
									<td class="px-6 py-4 text-sm text-gray-600">
										{% if event.club %}
										<span
											class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">{{
											event.club.name }}</span>
										{% elif event.department %}
										<span
											class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800">{{
											event.department.name }}</span>
										{% else %}
										<span class="text-gray-400">-</span>
										{% endif %}
									</td>
									<td class="px-6 py-4 text-sm text-gray-600">{{ event.date_time|date:"M d, Y H:i" }}
									</td>
									<td class="px-6 py-4 text-sm text-gray-600">
										{% if event.created_by %}
										{{ event.created_by.first_name }} {{ event.created_by.last_name }}
										{% else %}
										<span class="text-gray-400">-</span>
										{% endif %}
									</td>
									<td class="px-6 py-4 text-center text-sm font-medium space-x-2">
										<button onclick="showEventDetails('{{ event.id }}')"
											class="text-blue-600 hover:text-blue-900 font-medium">View</button>
										<button onclick="approveEvent('{{ event.id }}')"
											class="text-green-600 hover:text-green-900 font-medium">Approve</button>
										<button onclick="rejectEvent('{{ event.id }}')"
											class="text-red-600 hover:text-red-900 font-medium">Reject</button>
									</td>
								</tr>
								{% endfor %}
							</tbody>
						</table>
					</div>
					{% else %}
					<div class="p-12 text-center">
						<svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor"
							viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
								d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
						</svg>
						<p class="mt-4 text-gray-500">No pending events awaiting approval</p>
					</div>
					{% endif %}
				</div>

				<div id="approved" class="tab-content hidden">
					{% if approved_events %}
					<div class="overflow-x-auto">
						<table class="w-full">
							<thead class="bg-green-50 border-b border-gray-200">
								<tr>
									<th
										class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">
										Event Name</th>
									<th
										class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">
										Organization</th>
									<th
										class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">
										Date & Time</th>
									<th
										class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">
										Venue</th>
									<th
										class="px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider">
										Actions</th>
								</tr>
							</thead>
							<tbody class="divide-y divide-gray-200">
								{% for event in approved_events %}
								<tr class="hover:bg-green-50 transition-colors">
									<td class="px-6 py-4 text-sm font-medium text-gray-900">{{ event.name }}</td>
									<td class="px-6 py-4 text-sm text-gray-600">
										{% if event.club %}
										<span
											class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">{{
											event.club.name }}</span>
										{% elif event.department %}
										<span
											class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800">{{
											event.department.name }}</span>
										{% else %}
										<span class="text-gray-400">-</span>
										{% endif %}
									</td>
									<td class="px-6 py-4 text-sm text-gray-600">{{ event.date_time|date:"M d, Y H:i" }}
									</td>
									<td class="px-6 py-4 text-sm text-gray-600">{{ event.venue }}</td>
									<td class="px-6 py-4 text-center text-sm font-medium space-x-2">
										<button onclick="showEventDetails('{{ event.id }}')"
											class="text-blue-600 hover:text-blue-900 font-medium">View</button>
										<button onclick="markCompleted('{{ event.id }}')"
											class="text-green-600 hover:text-green-900 font-medium">Mark
											Complete</button>
									</td>
								</tr>
								{% endfor %}
							</tbody>
						</table>
					</div>
					{% else %}
					<div class="p-12 text-center">
						<svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor"
							viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
								d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
						</svg>
						<p class="mt-4 text-gray-500">No approved events scheduled</p>
					</div>
					{% endif %}
				</div>

				<div id="completed" class="tab-content hidden">
					{% if completed_events %}
					<div class="overflow-x-auto">
						<table class="w-full">
							<thead class="bg-blue-50 border-b border-gray-200">
								<tr>
									<th
										class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">
										Event Name</th>
									<th
										class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">
										Organization</th>
									<th
										class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">
										Completed Date</th>
									<th
										class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">
										Type</th>
									<th
										class="px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider">
										Actions</th>
								</tr>
							</thead>
							<tbody class="divide-y divide-gray-200">
								{% for event in completed_events %}
								<tr class="hover:bg-blue-50 transition-colors">
									<td class="px-6 py-4 text-sm font-medium text-gray-900">{{ event.name }}</td>
									<td class="px-6 py-4 text-sm text-gray-600">
										{% if event.club %}
										<span
											class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">{{
											event.club.name }}</span>
										{% elif event.department %}
										<span
											class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800">{{
											event.department.name }}</span>
										{% else %}
										<span class="text-gray-400">-</span>
										{% endif %}
									</td>
									<td class="px-6 py-4 text-sm text-gray-600">{{ event.date_time|date:"M d, Y" }}</td>
									<td class="px-6 py-4 text-sm text-gray-600">{{ event.event_type }}</td>
									<td class="px-6 py-4 text-center text-sm font-medium">
										<button onclick="showEventDetails('{{ event.id }}')"
											class="text-blue-600 hover:text-blue-900 font-medium">View Details</button>
									</td>
								</tr>
								{% endfor %}
							</tbody>
						</table>
					</div>
					{% else %}
					<div class="p-12 text-center">
						<svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor"
							viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
								d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
						</svg>
						<p class="mt-4 text-gray-500">No completed events yet</p>
					</div>
					{% endif %}
				</div>

				<div id="rejected" class="tab-content hidden">
					{% if rejected_events %}
					<div class="overflow-x-auto">
						<table class="w-full">
							<thead class="bg-red-50 border-b border-gray-200">
								<tr>
									<th
										class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">
										Event Name</th>
									<th
										class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">
										Organization</th>
									<th
										class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">
										Date & Time</th>
									<th
										class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase tracking-wider">
										Reason</th>
									<th
										class="px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase tracking-wider">
										Actions</th>
								</tr>
							</thead>
							<tbody class="divide-y divide-gray-200">
								{% for event in rejected_events %}
								<tr class="hover:bg-red-50 transition-colors">
									<td class="px-6 py-4 text-sm font-medium text-gray-900">{{ event.name }}</td>
									<td class="px-6 py-4 text-sm text-gray-600">
										{% if event.club %}
										<span
											class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">{{
											event.club.name }}</span>
										{% elif event.department %}
										<span
											class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800">{{
											event.department.name }}</span>
										{% else %}
										<span class="text-gray-400">-</span>
										{% endif %}
									</td>
									<td class="px-6 py-4 text-sm text-gray-600">{{ event.date_time|date:"M d, Y H:i" }}
									</td>
									<td class="px-6 py-4 text-sm text-gray-600">
										<p class="line-clamp-2">{{ event.approval_notes|default:"No reason provided" }}
										</p>
									</td>
									<td class="px-6 py-4 text-center text-sm font-medium">
										<button onclick="showEventDetails('{{ event.id }}')"
											class="text-blue-600 hover:text-blue-900 font-medium">View</button>
									</td>
								</tr>
								{% endfor %}
							</tbody>
						</table>
					</div>
					{% else %}
					<div class="p-12 text-center">
						<svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor"
							viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
								d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
						</svg>
						<p class="mt-4 text-gray-500">No rejected events</p>
					</div>
					{% endif %}
				</div>
			</div>
		</div>

		<!-- Quick Actions Section -->
		<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
			<!-- Notifications -->
			<div class="bg-white rounded-xl shadow-md overflow-hidden">
				<div class="bg-gradient-to-r from-blue-500 to-blue-600 px-6 py-4">
					<h3 class="font-semibold text-white text-lg flex items-center">
						<svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
							<path
								d="M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5.951-1.488 5.951 1.488a1 1 0 001.169-1.409l-7-14z" />
						</svg>
						Recent Notifications
					</h3>
				</div>
				<div class="p-6 space-y-3 max-h-72 overflow-y-auto">
					{% for note in notifications %}
					<div class="flex items-start p-3 bg-blue-50 rounded-lg border-l-4 border-blue-400">
						<div class="flex-1">
							<p class="text-sm font-medium text-gray-900">{{ note.message }}</p>
							<p class="text-xs text-gray-500 mt-1">{{ note.created_at|timesince }} ago</p>
						</div>
						{% if not note.read %}
						<span
							class="ml-2 flex-shrink-0 inline-flex items-center justify-center h-6 w-6 rounded-full bg-blue-600 text-white text-xs font-bold">!</span>
						{% endif %}
					</div>
					{% empty %}
					<div class="text-center py-8 text-gray-500">
						<p>No notifications</p>
					</div>
					{% endfor %}
				</div>
			</div>

			<!-- Quick Actions -->
			<div class="bg-white rounded-xl shadow-md overflow-hidden">
				<div class="bg-gradient-to-r from-purple-500 to-purple-600 px-6 py-4">
					<h3 class="font-semibold text-white text-lg flex items-center">
						<svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
							<path fill-rule="evenodd"
								d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 17v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.454z"
								clip-rule="evenodd" />
						</svg>
						Quick Actions
					</h3>
				</div>
				<div class="p-6 grid grid-cols-2 gap-3">
					<a href="{% url 'event_approval_list' %}"
						class="flex items-center justify-center p-4 bg-yellow-50 hover:bg-yellow-100 rounded-lg transition-colors border border-yellow-200">
						<div class="text-center">
							<svg class="w-6 h-6 text-yellow-600 mx-auto mb-2" fill="currentColor" viewBox="0 0 20 20">
								<path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z" />
								<path fill-rule="evenodd"
									d="M4 5a2 2 0 012-2 1 1 0 000 2H6a6 6 0 100 12H4a1 1 0 100 2 2 2 0 01-2-2V5z"
									clip-rule="evenodd" />
							</svg>
							<p class="text-xs font-medium text-gray-700">Review Events</p>
						</div>
					</a>
					<a href="{% url 'assign_club_coordinator' %}"
						class="flex items-center justify-center p-4 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors border border-blue-200">
						<div class="text-center">
							<svg class="w-6 h-6 text-blue-600 mx-auto mb-2" fill="currentColor" viewBox="0 0 20 20">
								<path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM9 6a9 9 0 11-18 0 9 9 0 0118 0z" />
							</svg>
							<p class="text-xs font-medium text-gray-700">Assign Coordinators</p>
						</div>
					</a>
					<a href="{% url 'calendar_view' %}"
						class="flex items-center justify-center p-4 bg-green-50 hover:bg-green-100 rounded-lg transition-colors border border-green-200">
						<div class="text-center">
							<svg class="w-6 h-6 text-green-600 mx-auto mb-2" fill="currentColor" viewBox="0 0 20 20">
								<path
									d="M6 2a1 1 0 00-1 1v2H4a2 2 0 00-2 2v2h16V7a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v2H7V3a1 1 0 00-1-1zm0 5a2 2 0 002 2h8a2 2 0 002-2H6z" />
							</svg>
							<p class="text-xs font-medium text-gray-700">View Calendar</p>
						</div>
					</a>
					<a href="{% url 'event_reports' %}"
						class="flex items-center justify-center p-4 bg-indigo-50 hover:bg-indigo-100 rounded-lg transition-colors border border-indigo-200">
						<div class="text-center">
							<svg class="w-6 h-6 text-indigo-600 mx-auto mb-2" fill="currentColor" viewBox="0 0 20 20">
								<path
									d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z" />
							</svg>
							<p class="text-xs font-medium text-gray-700">Reports</p>
						</div>
					</a>
				</div>
			</div>
		</div>

		<!-- Clubs & Departments Management Section -->
		<div class="mt-8">
			<div class="bg-white rounded-xl shadow-md overflow-hidden">
				<div class="bg-gradient-to-r from-indigo-500 to-indigo-600 px-6 py-4">
					<h3 class="font-semibold text-white text-lg flex items-center">
						<svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
							<path
								d="M10.5 1.5H3.75A2.25 2.25 0 001.5 3.75v12.5A2.25 2.25 0 003.75 18.5h12.5a2.25 2.25 0 002.25-2.25V9.5M6.5 5.5h7m-7 3h7m-7 3h4M17 3.5v5m2.5-2.5h-5" />
						</svg>
						Clubs & Departments Management
					</h3>
				</div>
				<div class="p-6">
					<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
						<!-- Clubs -->
						<div class="border rounded-lg p-4">
							<h4 class="font-semibold text-gray-800 mb-4 flex items-center">
								<svg class="w-5 h-5 mr-2 text-indigo-600" fill="currentColor" viewBox="0 0 20 20">
									<path
										d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z" />
								</svg>
								Clubs ({{ clubs|length }})
							</h4>
							<div class="space-y-2 max-h-64 overflow-y-auto">
								{% for club in clubs %}
								<div
									class="flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
									<div>
										<p class="font-medium text-gray-800">{{ club.name }}</p>
										<p class="text-xs text-gray-500">ID: {{ club.id }}</p>
									</div>
									<div class="flex gap-2">
										<button onclick="editClub('{{ club.id }}')"
											class="px-3 py-1 text-xs bg-blue-100 text-blue-600 rounded hover:bg-blue-200 transition-colors">View</button>
										<button onclick="deleteClub('{{ club.id }}')"
											class="px-3 py-1 text-xs bg-red-100 text-red-600 rounded hover:bg-red-200 transition-colors">Delete</button>
									</div>
								</div>
								{% empty %}
								<p class="text-center text-gray-500 py-4">No clubs yet</p>
								{% endfor %}
							</div>
							<button onclick="addClub()"
								class="w-full mt-4 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-medium">+
								Add Club</button>
						</div>

						<!-- Departments -->
						<div class="border rounded-lg p-4">
							<h4 class="font-semibold text-gray-800 mb-4 flex items-center">
								<svg class="w-5 h-5 mr-2 text-purple-600" fill="currentColor" viewBox="0 0 20 20">
									<path
										d="M4 4a2 2 0 00-2 2v4a2 2 0 002 2V6h10a2 2 0 00-2-2H4zm2 6a2 2 0 012-2h8a2 2 0 012 2v4a2 2 0 01-2 2H8a2 2 0 01-2-2v-4zm6 4a2 2 0 100-4 2 2 0 000 4z" />
								</svg>
								Departments ({{ departments|length }})
							</h4>
							<div class="space-y-2 max-h-64 overflow-y-auto">
								{% for dept in departments %}
								<div
									class="flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
									<div>
										<p class="font-medium text-gray-800">{{ dept.name }}</p>
										<p class="text-xs text-gray-500">ID: {{ dept.id }}</p>
									</div>
									<div class="flex gap-2">
										<button onclick="editDepartment('{{ dept.id }}')"
											class="px-3 py-1 text-xs bg-blue-100 text-blue-600 rounded hover:bg-blue-200 transition-colors">Edit</button>
										<button onclick="deleteDepartment('{{ dept.id }}')"
											class="px-3 py-1 text-xs bg-red-100 text-red-600 rounded hover:bg-red-200 transition-colors">Delete</button>
									</div>
								</div>
								{% empty %}
								<p class="text-center text-gray-500 py-4">No departments yet</p>
								{% endfor %}
							</div>
							<button onclick="addDepartment()"
								class="w-full mt-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors font-medium">+
								Add Department</button>
						</div>
					</div>
				</div>
			</div>
		</div>
		{% comment %}
		<!-- Finance & Resources Management Section -->
		<div class="mt-8 mb-8">
			<div class="bg-white rounded-xl shadow-md overflow-hidden">
				<div class="bg-gradient-to-r from-green-500 to-green-600 px-6 py-4">
					<h3 class="font-semibold text-white text-lg flex items-center">
						<svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
							<path
								d="M8.16 2.75a.75.75 0 00-1.32 0l-3.5 9.5A.75.75 0 003.75 13h12.5a.75.75 0 00.66-1.25l-3.5-9.5zM9.5 4.756L11.837 11H8.163L9.5 4.756zM3 15.75A.75.75 0 013.75 15h12.5a.75.75 0 010 1.5H3.75A.75.75 0 013 15.75z" />
						</svg>
						Finance & Resources Management
					</h3>
				</div>
				<div class="p-6">
					<div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
						<!-- Budget Overview -->
						<div class="bg-green-50 rounded-lg p-4 border border-green-200">
							<h4 class="font-semibold text-gray-800 mb-4 flex items-center">
								<svg class="w-5 h-5 mr-2 text-green-600" fill="currentColor" viewBox="0 0 20 20">
									<path
										d="M8.5 10a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM12.5 10a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM16.5 10a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z" />
								</svg>
								Total Budget
							</h4>
							<p class="text-3xl font-bold text-green-600">₹0</p>
							<p class="text-sm text-gray-600 mt-2">Allocated funds for activities</p>
							<button onclick="manageBudget()"
								class="w-full mt-3 px-3 py-2 text-sm bg-green-600 text-white rounded hover:bg-green-700 transition-colors">Manage
								Budget</button>
						</div>

						<!-- Resources -->
						<div class="bg-blue-50 rounded-lg p-4 border border-blue-200">
							<h4 class="font-semibold text-gray-800 mb-4 flex items-center">
								<svg class="w-5 h-5 mr-2 text-blue-600" fill="currentColor" viewBox="0 0 20 20">
									<path
										d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z" />
								</svg>
								Equipment & Resources
							</h4>
							<p class="text-lg font-semibold text-blue-600">0 Items</p>
							<p class="text-sm text-gray-600 mt-2">Managed inventory</p>
							<button onclick="manageResources()"
								class="w-full mt-3 px-3 py-2 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors">Manage
								Resources</button>
						</div>

						<!-- Expense Tracking -->
						<div class="bg-purple-50 rounded-lg p-4 border border-purple-200">
							<h4 class="font-semibold text-gray-800 mb-4 flex items-center">
								<svg class="w-5 h-5 mr-2 text-purple-600" fill="currentColor" viewBox="0 0 20 20">
									<path
										d="M4 4a2 2 0 00-2 2v4a2 2 0 002 2V6h10a2 2 0 00-2-2H4zm2 6a2 2 0 012-2h8a2 2 0 012 2v4a2 2 0 01-2 2H8a2 2 0 01-2-2v-4zm6 4a2 2 0 100-4 2 2 0 000 4z" />
								</svg>
								Total Expenses
							</h4>
							<p class="text-3xl font-bold text-purple-600">₹0</p>
							<p class="text-sm text-gray-600 mt-2">Tracked expenditures</p>
							<button onclick="trackExpenses()"
								class="w-full mt-3 px-3 py-2 text-sm bg-purple-600 text-white rounded hover:bg-purple-700 transition-colors">Track
								Expenses</button>
						</div>
					</div>

					<!-- Financial Transactions -->
					<div class="border rounded-lg overflow-hidden">
						<div class="bg-gray-50 px-4 py-3 border-b">
							<h4 class="font-semibold text-gray-800">Recent Financial Transactions</h4>
						</div>
						<div class="overflow-x-auto">
							<table class="w-full">
								<thead class="bg-gray-50 border-b">
									<tr>
										<th class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase">
											Description</th>
										<th class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase">
											Category</th>
										<th class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase">
											Amount</th>
										<th class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase">Date
										</th>
										<th class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase">
											Status</th>
									</tr>
								</thead>
								<tbody class="divide-y">
									<tr class="hover:bg-gray-50">
										<td colspan="5" class="px-6 py-8 text-center text-gray-500">No transactions yet
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
					<button onclick="addTransaction()"
						class="mt-4 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium">+
						Add Transaction</button>
				</div>
			</div>
		</div>

		<!-- Analytics & Reports Management Section -->
		<div class="mt-8">
			<div class="bg-white rounded-xl shadow-md overflow-hidden">
				<div class="bg-gradient-to-r from-teal-500 to-teal-600 px-6 py-4">
					<h3 class="font-semibold text-white text-lg flex items-center">
						<svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
							<path
								d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z" />
						</svg>
						Analytics & Reports
					</h3>
				</div>

				<!-- Analytics & Reports Tab Navigation -->
				<div class="flex border-b border-gray-200 bg-gray-50 overflow-x-auto">
					<button onclick="switchAnalyticsTab('analytics')"
						class="analytics-tab-btn active px-6 py-4 font-medium text-sm text-teal-600 border-b-2 border-teal-600 bg-white whitespace-nowrap">
						<svg class="inline w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
							<path
								d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z" />
						</svg>
						Analytics & Statistics
					</button>
					<button onclick="switchAnalyticsTab('reports')"
						class="analytics-tab-btn px-6 py-4 font-medium text-sm text-gray-500 hover:text-gray-700 whitespace-nowrap">
						<svg class="inline w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 20 20">
							<path
								d="M5.5 13a3.5 3.5 0 01-.369-6.98 4 4 0 117.753-1.3A4.5 4.5 0 1113.5 13H11V9.413l1.293 1.293a1 1 0 001.414-1.414l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 001.414 1.414L9 9.414V13H5.5z" />
						</svg>
						Event Reports
					</button>
				</div>

				<!-- Analytics Tab Content -->
				<div id="analytics" class="analytics-tab-content p-6">
					<!-- Filters Section -->
					<div class="mb-6 grid grid-cols-1 md:grid-cols-5 gap-4">
						<div>
							<label class="block text-sm font-medium text-gray-700 mb-2">Filter by Club</label>
							<select id="filterClub" onchange="applyFilters()"
								class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500">
								<option value="">All Clubs</option>
								{% for club in clubs %}
								<option value="{{ club.id }}">{{ club.name }}</option>
								{% endfor %}
							</select>
						</div>
						<div>
							<label class="block text-sm font-medium text-gray-700 mb-2">Filter by Department</label>
							<select id="filterDept" onchange="applyFilters()"
								class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500">
								<option value="">All Departments</option>
								{% for dept in departments %}
								<option value="{{ dept.id }}">{{ dept.name }}</option>
								{% endfor %}
							</select>
						</div>
						<div>
							<label class="block text-sm font-medium text-gray-700 mb-2">Date Range</label>
							<select id="filterDateRange" onchange="applyFilters()"
								class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500">
								<option value="all">All Time</option>
								<option value="30days">Last 30 Days</option>
								<option value="90days">Last 90 Days</option>
								<option value="6months">Last 6 Months</option>
								<option value="1year">Last Year</option>
							</select>
						</div>
						<div>
							<label class="block text-sm font-medium text-gray-700 mb-2">Timing</label>
							<select id="filterTiming" onchange="applyFilters()"
								class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500">
								<option value="">All Events</option>
								<option value="morning">Morning (6AM-12PM)</option>
								<option value="afternoon">Afternoon (12PM-5PM)</option>
								<option value="evening">Evening (5PM-10PM)</option>
								<option value="night">Night (10PM-6AM)</option>
							</select>
						</div>
						<div>
							<label class="block text-sm font-medium text-gray-700 mb-2">Status</label>
							<select id="filterStatus" onchange="applyFilters()"
								class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal-500">
								<option value="">All Status</option>
								<option value="PENDING">Pending</option>
								<option value="APPROVED">Approved</option>
								<option value="COMPLETED">Completed</option>
								<option value="REJECTED">Rejected</option>
							</select>
						</div>
					</div>

					<!-- Analytics Cards -->
					<div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-8">
						<div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4 border border-blue-200">
							<h4 class="text-gray-700 font-semibold text-sm">Total Events</h4>
							<p class="text-3xl font-bold text-blue-600 mt-2" id="statsTotal">{{ stats.total_events }}
							</p>
							<p class="text-xs text-gray-600 mt-1">Across selected filters</p>
						</div>
						<div
							class="bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4 border border-green-200">
							<h4 class="text-gray-700 font-semibold text-sm">Avg Attendance</h4>
							<p class="text-3xl font-bold text-green-600 mt-2" id="statsAvgAttendance">{{
								stats.avg_attendance }}</p>
							<p class="text-xs text-gray-600 mt-1">Per event</p>
						</div>
						<div
							class="bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4 border border-purple-200">
							<h4 class="text-gray-700 font-semibold text-sm">Success Rate</h4>
							<p class="text-3xl font-bold text-purple-600 mt-2" id="statsSuccessRate">{{
								stats.success_rate }}%</p>
							<p class="text-xs text-gray-600 mt-1">Completed/Approved</p>
						</div>
						<div
							class="bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg p-4 border border-orange-200">
							<h4 class="text-gray-700 font-semibold text-sm">Participation</h4>
							<p class="text-3xl font-bold text-orange-600 mt-2" id="statsTotalParticipation">{{
								stats.total_attendees }}</p>
							<!-- Event Status Distribution -->
							<div class="bg-gray-50 rounded-lg p-6 border border-gray-200">
								<h4 class="font-semibold text-gray-800 mb-4">Event Status Distribution</h4>
								<div class="space-y-3">
									<div class="flex items-center justify-between">
										<div class="flex items-center">
											<div class="w-3 h-3 bg-yellow-500 rounded-full mr-2"></div>
											<span class="text-sm text-gray-700">Pending</span>
										</div>
										<div class="flex items-center">
											<div class="flex-1 bg-gray-200 rounded-full h-2 mr-3 w-32"
												style="width: 32%;">
												<div class="bg-yellow-500 h-2 rounded-full" style="width: 100%;"></div>
											</div>
											<span class="text-sm font-medium text-gray-700" id="chartPending">{{
												stats.pending_events }}</span>
										</div>
									</div>
									<div class="flex items-center justify-between">
										<div class="flex items-center">
											<div class="w-3 h-3 bg-green-500 rounded-full mr-2"></div>
											<span class="text-sm text-gray-700">Approved</span>
										</div>
										<div class="flex items-center">
											<div class="flex-1 bg-gray-200 rounded-full h-2 mr-3 w-32"
												style="width: 32%;">
												<div class="bg-green-500 h-2 rounded-full" style="width: 100%;"></div>
											</div>
											<span class="text-sm font-medium text-gray-700" id="chartApproved">{{
												stats.approved_events }}</span>
										</div>
									</div>
									<div class="flex items-center justify-between">
										<div class="flex items-center">
											<div class="w-3 h-3 bg-blue-500 rounded-full mr-2"></div>
											<span class="text-sm text-gray-700">Completed</span>
										</div>
										<div class="flex items-center">
											<div class="flex-1 bg-gray-200 rounded-full h-2 mr-3 w-32"
												style="width: 32%;">
												<div class="bg-blue-500 h-2 rounded-full" style="width: 100%;"></div>
											</div>
											<span class="text-sm font-medium text-gray-700" id="chartCompleted">{{
												stats.completed_events }}</span>
										</div>
									</div>
									<div class="flex items-center justify-between">
										<div class="flex items-center">
											<div class="w-3 h-3 bg-red-500 rounded-full mr-2"></div>
											<span class="text-sm text-gray-700">Rejected</span>
										</div>
										<div class="flex items-center">
											<div class="flex-1 bg-gray-200 rounded-full h-2 mr-3 w-32"
												style="width: 32%;">
												<div class="bg-red-500 h-2 rounded-full" style="width: 100%;"></div>
											</div>
											<span class="text-sm font-medium text-gray-700" id="chartRejected">{{
												stats.rejected_events }}</span>
										</div>
									</div>
								</div>
							</div>

							<!-- Top Participating Clubs -->
							<div class="bg-gray-50 rounded-lg p-6 border border-gray-200">
								<h4 class="font-semibold text-gray-800 mb-4">Top Participating Clubs</h4>
								<div class="space-y-2">
									{% for club in clubs %}
									<div class="flex items-center justify-between py-2 border-b border-gray-200">
										<span class="text-sm text-gray-700">{{ club.name }}</span>
										<span class="text-sm font-semibold text-teal-600">5 events</span>
									</div>
									{% empty %}
									<p class="text-gray-500 text-sm">No clubs available</p>
									{% endfor %}
								</div>
							</div>

						</div>

						<!-- Participation Statistics by Event -->
						<div class="bg-gray-50 rounded-lg p-6 border border-gray-200">
							<h4 class="font-semibold text-gray-800 mb-4">Event-wise Participation Analysis</h4>
							<div class="overflow-x-auto">
								<table class="w-full">
									<thead class="bg-white border-b">
										<tr>
											<th class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase">
												Event Name</th>
											<th class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase">
												Club/Dept</th>
											<th
												class="px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase">
												Expected</th>
											<th
												class="px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase">
												Actual</th>
											<th
												class="px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase">
												Participation %</th>
											<th class="px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase">
												Date</th>
											<th
												class="px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase">
												Status</th>
										</tr>
									</thead>
									<tbody class="divide-y divide-gray-200">
										{% for event in completed_events %}
										<tr class="hover:bg-white transition-colors">
											<td class="px-6 py-3 text-sm font-medium text-gray-900">{{ event.name }}
											</td>
											<td class="px-6 py-3 text-sm text-gray-600">
												{% if event.club %}{{ event.club.name }}{% elif event.department %}{{
												event.department.name }}{% else %}System{% endif %}
											</td>
											<td class="px-6 py-3 text-center text-sm text-gray-600">{{
												event.expected_participants|default:"-" }}</td>
											<td class="px-6 py-3 text-center text-sm font-semibold text-gray-900">{{
												event.actual_participants|default:0 }}</td>
											<td class="px-6 py-3 text-center text-sm font-semibold text-teal-600"
												id="part-{{ event.id }}">-</td>
											<td class="px-6 py-3 text-sm text-gray-600">{{ event.date_time|date:"M d, Y"
												}}</td>
											<td class="px-6 py-3 text-center text-sm">
												<span class="px-2 py-1 rounded-full text-xs font-medium
												{% if event.status == 'COMPLETED' %}bg-blue-100 text-blue-800
												{% elif event.status == 'APPROVED' %}bg-green-100 text-green-800
												{% elif event.status == 'PENDING' %}bg-yellow-100 text-yellow-800
												{% elif event.status == 'REJECTED' %}bg-red-100 text-red-800
												{% endif %}">{{ event.get_status_display }}</span>
											</td>
										</tr>
										{% empty %}
										<tr>
											<td colspan="7" class="px-6 py-8 text-center text-gray-500">No completed
												events yet</td>
										</tr>
										{% endfor %}
									</tbody>
								</table>
							</div>

							{% endcomment %}
						</div>
					</div>

					<!-- Reports Tab Content -->
					<div id="reports" class="analytics-tab-content hidden p-6">
						<!-- Report Status Filter -->
						<div class="mb-6 flex gap-4 flex-wrap">
							<button onclick="filterReports('all')"
								class="report-filter active px-4 py-2 rounded-lg font-medium text-sm bg-teal-600 text-white transition-colors">
								All Reports
							</button>
							<button onclick="filterReports('approved')"
								class="report-filter px-4 py-2 rounded-lg font-medium text-sm bg-gray-200 text-gray-700 hover:bg-gray-300 transition-colors">
								Approved
							</button>
							<button onclick="filterReports('pending')"
								class="report-filter px-4 py-2 rounded-lg font-medium text-sm bg-gray-200 text-gray-700 hover:bg-gray-300 transition-colors">
								Pending for Approval
							</button>
							<button onclick="filterReports('notsubmitted')"
								class="report-filter px-4 py-2 rounded-lg font-medium text-sm bg-gray-200 text-gray-700 hover:bg-gray-300 transition-colors">
								Yet to Submit
							</button>
						</div>

						<!-- Approved Reports -->
						<div id="report-section-approved" class="mb-8">
							<h4 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
								<svg class="w-5 h-5 mr-2 text-green-600" fill="currentColor" viewBox="0 0 20 20">
									<path fill-rule="evenodd"
										d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
										clip-rule="evenodd" />
								</svg>
								Approved Event Reports (Submitted & Approved)
							</h4>
							<div class="grid gap-4">
								{% for report in approved_event_reports %}
								<div
									class="bg-white border border-green-200 rounded-lg p-4 hover:shadow-md transition-shadow">
									<div class="flex items-start justify-between mb-3">
										<div>
											<h5 class="font-semibold text-gray-900">{{ report.event.name }}</h5>
											<p class="text-sm text-gray-600">{{ report.title }}</p>
										</div>
										<span
											class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs font-semibold">Approved
											by SAC</span>
									</div>
									<div class="grid grid-cols-4 gap-4 mb-3">
										<div class="text-sm">
											<p class="text-gray-500">Submitted By</p>
											<p class="font-medium text-gray-900">{{ report.submitted_by.username }}</p>
										</div>
										<div class="text-sm">
											<p class="text-gray-500">Event Date</p>
											<p class="font-medium text-gray-900">{{ report.event.date_time|date:"M d, Y"
												}}</p>
										</div>
										<div class="text-sm">
											<p class="text-gray-500">Attendees</p>
											<p class="font-medium text-gray-900">{{ report.total_attendees }}/{{
												report.expected_attendees }}</p>
										</div>
										<div class="text-sm">
											<p class="text-gray-500">Submitted Date</p>
											<p class="font-medium text-gray-900">{{ report.submitted_at|date:"M d, Y" }}
											</p>
										</div>
									</div>
									{% if report.approved_by %}
									<div
										class="mb-3 p-2 bg-green-50 rounded border border-green-100 text-xs text-gray-600">
										<span class="font-medium">Approved by:</span> {{ report.approved_by.username }}
										{% if report.approved_at %}<span class="text-gray-500">on {{
											report.approved_at|date:"M d, Y" }}</span>{% endif %}
									</div>
									{% endif %}
									<button onclick="viewReportDetails({{ report.id }})"
										class="px-3 py-1 text-sm bg-green-100 text-green-700 rounded hover:bg-green-200 transition-colors">View
										Details</button>
								</div>
								{% empty %}
								<p class="text-gray-500 text-center py-8">No approved reports yet</p>
								{% endfor %}
							</div>
						</div>

						<!-- Pending Approval Reports -->
						<div id="report-section-pending" class="mb-8">
							<h4 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
								<svg class="w-5 h-5 mr-2 text-yellow-600" fill="currentColor" viewBox="0 0 20 20">
									<path d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 002 0V6z" />
								</svg>
								Pending for Approval (Submitted & Awaiting Review)
							</h4>
							<div class="grid gap-4">
								{% for report in pending_event_reports %}
								<div
									class="bg-white border border-yellow-200 rounded-lg p-4 hover:shadow-md transition-shadow">
									<div class="flex items-start justify-between mb-3">
										<div>
											<h5 class="font-semibold text-gray-900">{{ report.event.name }}</h5>
											<p class="text-sm text-gray-600">{{ report.title }}</p>
										</div>
										<span
											class="px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-semibold">Awaiting
											Review</span>
									</div>
									<div class="grid grid-cols-4 gap-4 mb-3">
										<div class="text-sm">
											<p class="text-gray-500">Submitted By</p>
											<p class="font-medium text-gray-900">{{ report.submitted_by.username }}</p>
										</div>
										<div class="text-sm">
											<p class="text-gray-500">Event Date</p>
											<p class="font-medium text-gray-900">{{ report.event.date_time|date:"M d, Y"
												}}</p>
										</div>
										<div class="text-sm">
											<p class="text-gray-500">Attendees</p>
											<p class="font-medium text-gray-900">{{ report.total_attendees }}/{{
												report.expected_attendees }}</p>
										</div>
										<div class="text-sm">
											<p class="text-gray-500">Submitted Date</p>
											<p class="font-medium text-gray-900">{{ report.submitted_at|date:"M d, Y" }}
											</p>
										</div>
									</div>
									<div class="flex gap-2">
										<button onclick="approveReport({{ report.id }})"
											class="px-3 py-1 text-sm bg-green-600 text-white rounded hover:bg-green-700 transition-colors">Approve</button>
										<button onclick="rejectReport({{ report.id }})"
											class="px-3 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700 transition-colors">Reject</button>
										<button onclick="viewReportDetails({{ report.id }})"
											class="px-3 py-1 text-sm bg-gray-300 text-gray-700 rounded hover:bg-gray-400 transition-colors">View
											Details</button>
									</div>
								</div>
								{% empty %}
								<p class="text-gray-500 text-center py-8">No pending reports awaiting approval</p>
								{% endfor %}
							</div>
						</div>

						<!-- Yet to Submit Reports -->
						<div id="report-section-notsubmitted" class="mb-8">
							<h4 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
								<svg class="w-5 h-5 mr-2 text-red-600" fill="currentColor" viewBox="0 0 20 20">
									<path fill-rule="evenodd"
										d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
										clip-rule="evenodd" />
								</svg>
								Yet to Submit (Completed Events without Reports)
							</h4>
							<div class="grid gap-4">
								{% for event in completed_events %}
								{% with report_count=event.eventreport_set.count %}
								{% if report_count == 0 %}
								<div
									class="bg-white border border-red-200 rounded-lg p-4 hover:shadow-md transition-shadow">
									<div class="flex items-start justify-between mb-3">
										<div>
											<h5 class="font-semibold text-gray-900">{{ event.name }}</h5>
											<p class="text-sm text-gray-600">{{ event.description|truncatewords:15 }}
											</p>
										</div>
										<span
											class="px-3 py-1 bg-red-100 text-red-800 rounded-full text-xs font-semibold">Report
											Not Submitted</span>
									</div>
									<div class="grid grid-cols-4 gap-4 mb-3">
										<div class="text-sm">
											<p class="text-gray-500">Club/Dept</p>
											<p class="font-medium text-gray-900">{% if event.club %}{{ event.club.name
												}}{% elif event.department %}{{ event.department.name }}{% else
												%}System{% endif %}</p>
										</div>
										<div class="text-sm">
											<p class="text-gray-500">Event Date</p>
											<p class="font-medium text-gray-900">{{ event.date_time|date:"M d, Y" }}</p>
										</div>
										<div class="text-sm">
											<p class="text-gray-500">Expected Attendees</p>
											<p class="font-medium text-gray-900">{{
												event.expected_participants|default:"N/A" }}</p>
										</div>
										<div class="text-sm">
											<p class="text-gray-500">Organizer</p>
											<p class="font-medium text-gray-900">{{ event.created_by.username }}</p>
										</div>
									</div>
									<button onclick="sendReminder({{ event.id }})"
										class="px-3 py-1 text-sm bg-yellow-600 text-white rounded hover:bg-yellow-700 transition-colors">Send
										Reminder to Organizer</button>
								</div>
								{% endif %}
								{% endwith %}
								{% empty %}
								<p class="text-gray-500 text-center py-8">All completed events have submitted reports!
								</p>
								{% endfor %}
							</div>
						</div>
					</div>
				</div>
			</div>


		</div>
	</div>

	<!-- JavaScript for Tab Switching -->
	<script>
		function switchTab(tabName) {
			// Hide all tab contents
			const tabs = document.querySelectorAll('.tab-content');
			tabs.forEach(tab => tab.classList.add('hidden'));

			// Remove active class from all buttons
			const buttons = document.querySelectorAll('.tab-btn');
			buttons.forEach(btn => {
				btn.classList.remove('border-b-2', 'border-yellow-600', 'border-green-600', 'border-blue-600', 'border-red-600', 'bg-white', 'text-yellow-600', 'text-green-600', 'text-blue-600', 'text-red-600');
				btn.classList.add('text-gray-500');
			});

			// Show selected tab
			document.getElementById(tabName).classList.remove('hidden');

			// Add active class to clicked button
			event.target.closest('.tab-btn').classList.add('border-b-2', 'bg-white');
			if (tabName === 'pending') event.target.closest('.tab-btn').classList.add('border-yellow-600', 'text-yellow-600');
			else if (tabName === 'approved') event.target.closest('.tab-btn').classList.add('border-green-600', 'text-green-600');
			else if (tabName === 'completed') event.target.closest('.tab-btn').classList.add('border-blue-600', 'text-blue-600');
			else if (tabName === 'rejected') event.target.closest('.tab-btn').classList.add('border-red-600', 'text-red-600');
			event.target.closest('.tab-btn').classList.remove('text-gray-500');
		}

		// Analytics & Reports Tab Functions
		function switchAnalyticsTab(tabName) {
			// Hide all analytics tab contents
			const analyticsTabs = document.querySelectorAll('.analytics-tab-content');
			analyticsTabs.forEach(tab => tab.classList.add('hidden'));

			// Show selected tab
			const selectedTab = document.getElementById(tabName);
			if (selectedTab) {
				selectedTab.classList.remove('hidden');
			}

			// Update button styles
			const buttons = document.querySelectorAll('.analytics-tab-btn');
			buttons.forEach(btn => {
				btn.classList.remove('active', 'text-teal-600', 'border-b-2', 'border-teal-600', 'bg-white');
				btn.classList.add('text-gray-500', 'hover:text-gray-700');
			});

			event.target.closest('.analytics-tab-btn').classList.add('active', 'text-teal-600', 'border-b-2', 'border-teal-600', 'bg-white');
			event.target.closest('.analytics-tab-btn').classList.remove('text-gray-500', 'hover:text-gray-700');
		}

		function applyFilters() {
			const club = document.getElementById('filterClub').value;
			const dept = document.getElementById('filterDept').value;
			const dateRange = document.getElementById('filterDateRange').value;
			const timing = document.getElementById('filterTiming').value;
			const status = document.getElementById('filterStatus').value;

			showNotification('Filters applied! Updating analytics...', 'success');

			// Update visualization with data
			updateAnalyticsDisplay(club, dept, dateRange, timing, status);
		}

		function updateAnalyticsDisplay(club, dept, dateRange, timing, status) {
			// Display current data from Django context
			// Phase 2: Backend AJAX will recalculate based on selected filters
			showNotification('Filters applied! Displaying data from current page load. Backend AJAX integration coming in Phase 2.', 'success');

			// Calculate participation percentages
			const rows = document.querySelectorAll('tbody tr');
			rows.forEach(row => {
				if (row.cells.length > 5) {
					const expected = parseInt(row.cells[2].textContent) || 1;
					const actual = parseInt(row.cells[3].textContent) || 0;
					const percentage = Math.round((actual / expected) * 100);
					const cell = row.querySelector('[id^="part-"]');
					if (cell) {
						cell.textContent = percentage + '%';
					}
				}
			});
		}

		function filterReports(filterType) {
			// Update filter button styles
			const buttons = document.querySelectorAll('.report-filter');
			buttons.forEach(btn => {
				btn.classList.remove('active', 'bg-teal-600', 'text-white');
				btn.classList.add('bg-gray-200', 'text-gray-700', 'hover:bg-gray-300');
			});

			event.target.classList.add('active', 'bg-teal-600', 'text-white');
			event.target.classList.remove('bg-gray-200', 'text-gray-700', 'hover:bg-gray-300');

			// Show/hide report sections based on filter
			document.getElementById('report-section-approved').classList.add('hidden');
			document.getElementById('report-section-pending').classList.add('hidden');
			document.getElementById('report-section-notsubmitted').classList.add('hidden');

			switch (filterType) {
				case 'all':
					document.getElementById('report-section-approved').classList.remove('hidden');
					document.getElementById('report-section-pending').classList.remove('hidden');
					document.getElementById('report-section-notsubmitted').classList.remove('hidden');
					break;
				case 'approved':
					document.getElementById('report-section-approved').classList.remove('hidden');
					break;
				case 'pending':
					document.getElementById('report-section-pending').classList.remove('hidden');
					break;
				case 'notsubmitted':
					document.getElementById('report-section-notsubmitted').classList.remove('hidden');
					break;
			}
		}

		function viewReportDetails(reportId) {
			showNotification('Opening report details for ID: ' + reportId, 'success');
		}

		function approveReport(reportId) {
			const notes = prompt('Enter approval notes (optional):');
			if (notes !== null) {
				showNotification('Report approved successfully!', 'success');
				setTimeout(() => location.reload(), 1500);
			}
		}

		function rejectReport(reportId) {
			const reason = prompt('Enter rejection reason:');
			if (reason !== null && reason.trim() !== '') {
				showNotification('Report rejected!', 'success');
				setTimeout(() => location.reload(), 1500);
			}
		}

		function sendReminder(eventId) {
			showNotification('Reminder sent to event organizer!', 'success');
		}

		// Get CSRF token from cookies
		function getCookie(name) {
			let cookieValue = null;
			if (document.cookie && document.cookie !== '') {
				const cookies = document.cookie.split(';');
				for (let i = 0; i < cookies.length; i++) {
					const cookie = cookies[i].trim();
					if (cookie.substring(0, name.length + 1) === (name + '=')) {
						cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
						break;
					}
				}
			}
			return cookieValue;
		}

		function showEventDetails(eventId) {
			// Redirect to event detail page or show modal
			window.location.href = '/events/' + eventId + '/';
		}

		function approveEvent(eventId) {
			const notes = prompt('Add approval notes (optional):');
			if (notes !== null) {
				const formData = new FormData();
				formData.append('event_id', eventId);
				formData.append('action', 'approve');
				formData.append('notes', notes);
				formData.append('csrfmiddlewaretoken', getCookie('csrftoken'));

				fetch('{% url "event_approve_reject" %}', {
					method: 'POST',
					body: formData
				})
					.then(response => {
						if (response.ok) {
							showNotification('Event approved successfully!', 'success');
							setTimeout(() => location.reload(), 1500);
						} else {
							showNotification('Failed to approve event', 'error');
						}
					})
					.catch(error => {
						console.error('Error:', error);
						showNotification('Error approving event', 'error');
					});
			}
		}

		function rejectEvent(eventId) {
			const reason = prompt('Enter rejection reason:');
			if (reason !== null && reason.trim() !== '') {
				const formData = new FormData();
				formData.append('event_id', eventId);
				formData.append('action', 'reject');
				formData.append('notes', reason);
				formData.append('csrfmiddlewaretoken', getCookie('csrftoken'));

				fetch('{% url "event_approve_reject" %}', {
					method: 'POST',
					body: formData
				})
					.then(response => {
						if (response.ok) {
							showNotification('Event rejected successfully!', 'success');
							setTimeout(() => location.reload(), 1500);
						} else {
							showNotification('Failed to reject event', 'error');
						}
					})
					.catch(error => {
						console.error('Error:', error);
						showNotification('Error rejecting event', 'error');
					});
			}
		}

		function markCompleted(eventId) {
			if (confirm('Mark this event as completed?')) {
				const formData = new FormData();
				formData.append('event_id', eventId);
				formData.append('action', 'complete');
				formData.append('csrfmiddlewaretoken', getCookie('csrftoken'));

				fetch('{% url "event_approve_reject" %}', {
					method: 'POST',
					body: formData
				})
					.then(response => {
						if (response.ok) {
							showNotification('Event marked as completed!', 'success');
							setTimeout(() => location.reload(), 1500);
						} else {
							showNotification('Failed to mark event as completed', 'error');
						}
					})
					.catch(error => {
						console.error('Error:', error);
						showNotification('Error marking event as completed', 'error');
					});
			}
		}

		function showNotification(message, type) {
			const notification = document.createElement('div');
			notification.className = `fixed top-4 right-4 px-6 py-3 rounded-lg text-white font-medium shadow-lg z-50 ${type === 'success' ? 'bg-green-500' : 'bg-red-500'
				}`;
			notification.textContent = message;
			document.body.appendChild(notification);

			setTimeout(() => {
				notification.remove();
			}, 3000);
		}

		// Clubs & Departments Functions
		function addClub() {
			window.location.href = "{% url 'club_create' %}";
		}

		function editClub(clubId) {
			window.location.href = `/clubs/${clubId}/edit/`;
		}

		function deleteClub(clubId) {
			if (confirm('Are you sure you want to delete this club? This action cannot be undone.')) {
				fetch('{% url "api_clubs_crud" %}', {
					method: 'POST',
					headers: {
						'Content-Type': 'application/json',
						'X-CSRFToken': getCookie('csrftoken')
					},
					body: JSON.stringify({
						action: 'delete',
						id: clubId
					})
				})
					.then(response => response.json())
					.then(data => {
						if (data.success) {
							showNotification('Club deleted successfully!', 'success');
							setTimeout(() => location.reload(), 1500);
						} else {
							showNotification('Failed to delete club: ' + data.error, 'error');
						}
					})
					.catch(error => {
						console.error('Error:', error);
						showNotification('Error deleting club', 'error');
					});
			}
		}

		function addDepartment() {
			const name = prompt('Enter department name:');
			if (name && name.trim()) {
				const description = prompt('Enter department description (optional):');

				fetch('{% url "api_departments_crud" %}', {
					method: 'POST',
					headers: {
						'Content-Type': 'application/json',
						'X-CSRFToken': getCookie('csrftoken')
					},
					body: JSON.stringify({
						action: 'create',
						name: name,
						description: description || ''
					})
				})
					.then(response => response.json())
					.then(data => {
						if (data.success) {
							showNotification('Department added successfully!', 'success');
							setTimeout(() => location.reload(), 1500);
						} else {
							showNotification('Failed to add department: ' + data.error, 'error');
						}
					})
					.catch(error => {
						console.error('Error:', error);
						showNotification('Error adding department', 'error');
					});
			}
		}

		function editDepartment(deptId) {
			const name = prompt('Enter new department name:');
			if (name && name.trim()) {
				fetch('{% url "api_departments_crud" %}', {
					method: 'POST',
					headers: {
						'Content-Type': 'application/json',
						'X-CSRFToken': getCookie('csrftoken')
					},
					body: JSON.stringify({
						action: 'update',
						id: deptId,
						name: name
					})
				})
					.then(response => response.json())
					.then(data => {
						if (data.success) {
							showNotification('Department updated successfully!', 'success');
							setTimeout(() => location.reload(), 1500);
						} else {
							showNotification('Failed to update department: ' + data.error, 'error');
						}
					})
					.catch(error => {
						console.error('Error:', error);
						showNotification('Error updating department', 'error');
					});
			}
		}

		function deleteDepartment(deptId) {
			if (confirm('Are you sure you want to delete this department?')) {
				fetch('{% url "api_departments_crud" %}', {
					method: 'POST',
					headers: {
						'Content-Type': 'application/json',
						'X-CSRFToken': getCookie('csrftoken')
					},
					body: JSON.stringify({
						action: 'delete',
						id: deptId
					})
				})
					.then(response => response.json())
					.then(data => {
						if (data.success) {
							showNotification('Department deleted successfully!', 'success');
							setTimeout(() => location.reload(), 1500);
						} else {
							showNotification('Failed to delete department: ' + data.error, 'error');
						}
					})
					.catch(error => {
						console.error('Error:', error);
						showNotification('Error deleting department', 'error');
					});
			}
		}

		// Users & Roles Functions
		function addUser() {
			const username = prompt('Enter username:');
			if (username && username.trim()) {
				showNotification('User creation initiated!', 'success');
				// In production, this would open a form or modal
			}
		}

		function editUser(userId) {
			showNotification('Opening user editor...', 'success');
			// In production, this would open a form or modal for editing user roles
		}

		// Finance & Resources Functions
		function manageBudget() {
			showNotification('Opening budget management...', 'success');
			// In production, this would open a budget management interface
		}

		function manageResources() {
			showNotification('Opening resource inventory...', 'success');
			// In production, this would open a resource management interface
		}

		function trackExpenses() {
			showNotification('Opening expense tracker...', 'success');
			// In production, this would open an expense tracking interface
		}

		function addTransaction() {
			showNotification('Opening transaction form...', 'success');
			// In production, this would open a transaction entry form
		}
	</script>

	{% endif %}
	{% endblock %}