{% extends 'base.html' %}
{% load static %}

{% block title %}SVP Dashboard - MITS SAC Hub{% endblock %}

{% block content %}
<!-- SVP Welcome Section -->
<div class="dashboard-welcome">
    <h1>Welcome, SVP {{ user.get_full_name|default:user.username }}! ğŸ–ï¸</h1>
    <p>Drive institutional excellence through strategic vision. Monitor club performance, guide policy decisions, and foster a vibrant campus culture.</p>
</div>

<!-- Strategic Overview Stats -->
<div class="stats-showcase">
    <div class="stat-card">
        <h3>Total Clubs</h3>
        <div class="number">{{ total_clubs|default:47 }}</div>
        <div class="label">Campus Organizations</div>
    </div>
    <div class="stat-card">
        <h3>Active Students</h3>
        <div class="number">{{ active_students|default:3280 }}</div>
        <div class="label">Participating Members</div>
    </div>
    <div class="stat-card">
        <h3>Strategic Initiatives</h3>
        <div class="number">{{ strategic_initiatives|default:12 }}</div>
        <div class="label">In Progress</div>
    </div>
    <div class="stat-card">
        <h3>Campus Rating</h3>
        <div class="number">{{ campus_rating|default:4.9 }}</div>
        <div class="label">Excellence Score</div>
    </div>
</div>

<!-- Executive Management Tools -->
<div class="card-grid">
    <!-- Strategic Planning -->
    <div class="feature-card">
        <div class="feature-card-header">
            <span class="feature-card-icon">ğŸ¯</span>
            <h3>Strategic Planning</h3>
        </div>
        <div class="feature-card-body">
            <p>Define institutional vision, set strategic goals, and drive campus-wide initiatives for student engagement and excellence.</p>
            <div style="display: flex; gap: 0.75rem; flex-wrap: wrap;">
                <a href="/svp/strategy/" class="btn btn-primary" style="flex: 1;">Strategic Dashboard</a>
                <a href="/svp/initiatives/" class="btn btn-outline" style="flex: 1;">View Initiatives</a>
            </div>
        </div>
    </div>

    <!-- Performance Monitoring -->
    <div class="feature-card">
        <div class="feature-card-header">
            <span class="feature-card-icon">ğŸ“Š</span>
            <h3>Performance Analytics</h3>
        </div>
        <div class="feature-card-body">
            <p>Monitor institutional KPIs, track student engagement metrics, and analyze club performance across departments.</p>
            <div style="display: flex; gap: 0.75rem; flex-wrap: wrap;">
                <a href="/svp/analytics/" class="btn btn-success" style="flex: 1;">View Analytics</a>
                <a href="/svp/reports/" class="btn btn-outline" style="flex: 1;">Executive Reports</a>
            </div>
        </div>
    </div>

    <!-- Policy & Governance -->
    <div class="feature-card">
        <div class="feature-card-header">
            <span class="feature-card-icon">âš–ï¸</span>
            <h3>Policy & Governance</h3>
        </div>
        <div class="feature-card-body">
            <p>Review and approve institutional policies, ensure compliance, and maintain governance standards across all activities.</p>
            <div style="display: flex; gap: 0.75rem; flex-wrap: wrap;">
                <a href="/svp/governance/" class="btn btn-accent" style="flex: 1;">Policy Center</a>
                <a href="/svp/compliance/" class="btn btn-outline" style="flex: 1;">Compliance</a>
            </div>
        </div>
    </div>

    <!-- Stakeholder Relations -->
    <div class="feature-card">
        <div class="feature-card-header">
            <span class="feature-card-icon">ğŸ¤</span>
            <h3>Stakeholder Relations</h3>
        </div>
        <div class="feature-card-body">
            <p>Engage with external partners, coordinate with alumni networks, and strengthen institutional partnerships.</p>
            <div style="display: flex; gap: 0.75rem; flex-wrap: wrap;">
                <a href="/svp/partnerships/" class="btn btn-primary" style="flex: 1;">Partnerships</a>
                <a href="/svp/alumni/" class="btn btn-outline" style="flex: 1;">Alumni Network</a>
            </div>
        </div>
    </div>
</div>

<!-- Executive Dashboard - Key Performance Indicators -->
<div class="interactive-section">
    <div class="section-header">
        <h2>Institutional Key Performance Indicators</h2>
        <p>Monitor critical metrics that drive institutional success</p>
    </div>

    <div class="card-grid" style="grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));">
        <div class="feature-card">
            <div class="feature-card-header">
                <span class="feature-card-icon">ğŸ“ˆ</span>
                <h3>Student Engagement Index</h3>
            </div>
            <div class="feature-card-body">
                <div style="font-size: 2.5rem; font-weight: 700; color: var(--accent-emerald); margin-bottom: 0.5rem;">
                    {{ student_engagement_index|default:84 }}/100
                </div>
                <p style="margin-bottom: 1rem;">Overall student participation in campus activities</p>
                <div style="background: var(--surface-tertiary); height: 8px; border-radius: 4px; overflow: hidden;">
                    <div style="background: linear-gradient(90deg, var(--accent-emerald), #48bb78); height: 100%; width: {{ student_engagement_index|default:84 }}%; border-radius: 4px; transition: width 1s ease;"></div>
                </div>
                <div style="display: flex; justify-content: space-between; margin-top: 0.5rem;">
                    <small style="color: var(--text-muted);">Target: 85</small>
                    <small style="color: var(--accent-emerald);">â†— +6% YoY</small>
                </div>
            </div>
        </div>

        <div class="feature-card">
            <div class="feature-card-header">
                <span class="feature-card-icon">ğŸ“</span>
                <h3>Academic Integration</h3>
            </div>
            <div class="feature-card-body">
                <div style="font-size: 2.5rem; font-weight: 700; color: var(--primary-main); margin-bottom: 0.5rem;">
                    {{ academic_integration|default:91 }}%
                </div>
                <p style="margin-bottom: 1rem;">Extracurricular activities aligned with academic goals</p>
                <div style="display: flex; align-items: center; gap: 0.5rem; margin-top: 0.5rem;">
                    <span style="color: var(--accent-emerald); font-size: 0.875rem;">ğŸ¯ Excellent</span>
                    <span style="color: var(--text-muted); font-size: 0.875rem;">above industry benchmark</span>
                </div>
            </div>
        </div>

        <div class="feature-card">
            <div class="feature-card-header">
                <span class="feature-card-icon">ğŸŒŸ</span>
                <h3>Innovation Index</h3>
            </div>
            <div class="feature-card-body">
                <div style="font-size: 2.5rem; font-weight: 700; color: var(--accent-gold); margin-bottom: 0.5rem;">
                    {{ innovation_index|default:87 }}/100
                </div>
                <p style="margin-bottom: 1rem;">Student-led innovation and entrepreneurship activities</p>
                <div style="display: flex; align-items: center; gap: 0.5rem; margin-top: 0.5rem;">
                    <span style="color: var(--accent-gold); font-size: 0.875rem;">ğŸš€ High Impact</span>
                    <span style="color: var(--text-muted); font-size: 0.875rem;">innovation ecosystem</span>
                </div>
            </div>
        </div>

        <div class="feature-card">
            <div class="feature-card-header">
                <span class="feature-card-icon">ğŸ†</span>
                <h3>Institutional Excellence</h3>
            </div>
            <div class="feature-card-body">
                <div style="font-size: 2.5rem; font-weight: 700; color: var(--accent-royal); margin-bottom: 0.5rem;">
                    {{ institutional_ranking|default:15 }}
                </div>
                <p style="margin-bottom: 1rem;">National ranking in student activities</p>
                <div style="display: flex; align-items: center; gap: 0.5rem; margin-top: 0.5rem;">
                    <span style="color: var(--accent-emerald); font-size: 0.875rem;">â†— +3 positions</span>
                    <span style="color: var(--text-muted); font-size: 0.875rem;">this academic year</span>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Strategic Initiatives Tracking -->
<div class="interactive-section">
    <div class="section-header">
        <h2>Strategic Initiatives Progress</h2>
        <p>Monitor the progress of key institutional initiatives and strategic projects</p>
    </div>

    {% if strategic_initiatives_list %}
    <div class="modern-table">
        <table>
            <thead>
                <tr>
                    <th>Initiative Name</th>
                    <th>Lead Department</th>
                    <th>Progress</th>
                    <th>Timeline</th>
                    <th>Budget Status</th>
                    <th>Impact Level</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for initiative in strategic_initiatives_list %}
                <tr>
                    <td><strong>{{ initiative.name }}</strong></td>
                    <td>{{ initiative.department }}</td>
                    <td>
                        <div style="display: flex; align-items: center; gap: 0.5rem;">
                            <div style="flex: 1; background: var(--surface-tertiary); height: 6px; border-radius: 3px; overflow: hidden;">
                                <div style="background: var(--primary-main); height: 100%; width: {{ initiative.progress|default:65 }}%; transition: width 0.3s ease;"></div>
                            </div>
                            <span style="font-size: 0.875rem; color: var(--text-secondary);">{{ initiative.progress|default:65 }}%</span>
                        </div>
                    </td>
                    <td>{{ initiative.timeline }}</td>
                    <td>
                        {% if initiative.budget_status == 'ON_TRACK' %}
                            <span class="status-badge status-success">On Track</span>
                        {% elif initiative.budget_status == 'OVER_BUDGET' %}
                            <span class="status-badge status-error">Over Budget</span>
                        {% elif initiative.budget_status == 'UNDER_BUDGET' %}
                            <span class="status-badge" style="background: rgba(56, 161, 105, 0.1); color: var(--accent-emerald);">Under Budget</span>
                        {% else %}
                            <span class="status-badge status-warning">{{ initiative.budget_status }}</span>
                        {% endif %}
                    </td>
                    <td>
                        {% if initiative.impact == 'HIGH' %}
                            <span class="status-badge" style="background: rgba(214, 158, 46, 0.1); color: var(--accent-gold);">ğŸ¯ High</span>
                        {% elif initiative.impact == 'MEDIUM' %}
                            <span class="status-badge" style="background: rgba(66, 153, 225, 0.1); color: var(--info);">ğŸ“Š Medium</span>
                        {% else %}
                            <span class="status-badge" style="background: rgba(74, 85, 104, 0.1); color: var(--accent-slate);">ğŸ“‹ Low</span>
                        {% endif %}
                    </td>
                    <td>
                        <div style="display: flex; gap: 0.5rem;">
                            <a href="/svp/initiative/{{ initiative.id }}/" class="btn btn-primary" style="padding: 0.5rem; font-size: 0.75rem;">Review</a>
                            <a href="/svp/initiative/{{ initiative.id }}/update/" class="btn btn-outline" style="padding: 0.5rem; font-size: 0.75rem;">Update</a>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="empty-state">
        <h3>Strategic Planning Ready ğŸ¯</h3>
        <p>All strategic initiatives are on track. Ready to launch new transformative projects!</p>
        <a href="/svp/strategy/new/" class="btn btn-primary">Launch New Initiative</a>
    </div>
    {% endif %}
</div>

<!-- Executive Command Center -->
<div class="interactive-section">
    <div class="section-header">
        <h2>Executive Command Center</h2>
        <p>Critical tools and resources for institutional leadership</p>
    </div>
    
    <div class="card-grid" style="grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
        <div style="background: var(--surface-primary); padding: 1.5rem; border-radius: var(--radius-lg); box-shadow: var(--shadow-md); text-align: center; border-left: 4px solid var(--primary-main);">
            <div style="font-size: 2rem; margin-bottom: 0.75rem;">ğŸ¯</div>
            <h4 style="margin-bottom: 0.5rem; color: var(--text-primary);">Strategic Planning</h4>
            <p style="font-size: 0.875rem; color: var(--text-secondary); margin-bottom: 1rem;">Define and track institutional strategic objectives</p>
            <a href="/svp/strategic-planning/" class="btn btn-outline" style="width: 100%; padding: 0.75rem;">Plan Strategy</a>
        </div>

        <div style="background: var(--surface-primary); padding: 1.5rem; border-radius: var(--radius-lg); box-shadow: var(--shadow-md); text-align: center; border-left: 4px solid var(--accent-emerald);">
            <div style="font-size: 2rem; margin-bottom: 0.75rem;">ğŸ“ˆ</div>
            <h4 style="margin-bottom: 0.5rem; color: var(--text-primary);">Executive Dashboard</h4>
            <p style="font-size: 0.875rem; color: var(--text-secondary); margin-bottom: 1rem;">Real-time institutional performance metrics</p>
            <a href="/svp/executive-dashboard/" class="btn btn-outline" style="width: 100%; padding: 0.75rem;">View Dashboard</a>
        </div>

        <div style="background: var(--surface-primary); padding: 1.5rem; border-radius: var(--radius-lg); box-shadow: var(--shadow-md); text-align: center; border-left: 4px solid var(--accent-gold);">
            <div style="font-size: 2rem; margin-bottom: 0.75rem;">ğŸ¤</div>
            <h4 style="margin-bottom: 0.5rem; color: var(--text-primary);">Stakeholder Engagement</h4>
            <p style="font-size: 0.875rem; color: var(--text-secondary); margin-bottom: 1rem;">Manage relationships with key stakeholders</p>
            <a href="/svp/stakeholders/" class="btn btn-outline" style="width: 100%; padding: 0.75rem;">Engage Stakeholders</a>
        </div>

        <div style="background: var(--surface-primary); padding: 1.5rem; border-radius: var(--radius-lg); box-shadow: var(--shadow-md); text-align: center; border-left: 4px solid var(--info);">
            <div style="font-size: 2rem; margin-bottom: 0.75rem;">âš–ï¸</div>
            <h4 style="margin-bottom: 0.5rem; color: var(--text-primary);">Policy Management</h4>
            <p style="font-size: 0.875rem; color: var(--text-secondary); margin-bottom: 1rem;">Review and approve institutional policies</p>
            <a href="/svp/policies/" class="btn btn-outline" style="width: 100%; padding: 0.75rem;">Manage Policies</a>
        </div>

        <div style="background: var(--surface-primary); padding: 1.5rem; border-radius: var(--radius-lg); box-shadow: var(--shadow-md); text-align: center; border-left: 4px solid var(--accent-royal);">
            <div style="font-size: 2rem; margin-bottom: 0.75rem;">ğŸ–ï¸</div>
            <h4 style="margin-bottom: 0.5rem; color: var(--text-primary);">Recognition Programs</h4>
            <p style="font-size: 0.875rem; color: var(--text-secondary); margin-bottom: 1rem;">Institutional awards and recognition initiatives</p>
            <a href="/svp/recognition/" class="btn btn-outline" style="width: 100%; padding: 0.75rem;">Manage Awards</a>
        </div>

        <div style="background: var(--surface-primary); padding: 1.5rem; border-radius: var(--radius-lg); box-shadow: var(--shadow-md); text-align: center; border-left: 4px solid var(--accent-crimson);">
            <div style="font-size: 2rem; margin-bottom: 0.75rem;">ğŸ”</div>
            <h4 style="margin-bottom: 0.5rem; color: var(--text-primary);">Quality Assurance</h4>
            <p style="font-size: 0.875rem; color: var(--text-secondary); margin-bottom: 1rem;">Monitor and ensure institutional quality standards</p>
            <a href="/svp/quality/" class="btn btn-outline" style="width: 100%; padding: 0.75rem;">Quality Control</a>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Animate institutional metrics
    const statNumbers = document.querySelectorAll('.stat-card .number');
    statNumbers.forEach((number, index) => {
        const finalValue = parseFloat(number.textContent);
        let currentValue = 0;
        const isDecimal = finalValue % 1 !== 0;
        const increment = isDecimal ? finalValue / 60 : Math.ceil(finalValue / 60);
        
        const counter = setInterval(() => {
            currentValue += increment;
            if (currentValue >= finalValue) {
                number.textContent = finalValue;
                clearInterval(counter);
            } else {
                number.textContent = isDecimal ? currentValue.toFixed(1) : Math.floor(currentValue);
            }
        }, 25);
    });

    // Enhanced progress visualization for strategic initiatives
    setTimeout(() => {
        const progressBars = document.querySelectorAll('[style*="width:"][style*="%"]');
        progressBars.forEach((bar, index) => {
            const width = bar.style.width;
            bar.style.width = '0%';
            setTimeout(() => {
                bar.style.width = width;
            }, 500 * (index + 1));
        });
    }, 1500);

    // SVP-specific executive interactions
    const executiveButtons = document.querySelectorAll('a[href*="/svp/"]');
    executiveButtons.forEach(button => {
        button.addEventListener('click', function(e) {
            // Add executive-level visual feedback
            this.style.transform = 'scale(0.98)';
            this.style.boxShadow = 'inset 0 2px 4px rgba(0,0,0,0.1)';
            setTimeout(() => {
                this.style.transform = '';
                this.style.boxShadow = '';
            }, 200);
        });
    });

    // Strategic initiative impact highlighting
    document.querySelectorAll('tr').forEach(row => {
        const impactCell = row.querySelector('[style*="ğŸ¯ High"]');
        if (impactCell) {
            row.style.borderLeft = '3px solid var(--accent-gold)';
            row.style.background = 'rgba(214, 158, 46, 0.03)';
        }
    });

    // Executive dashboard real-time updates simulation
    setInterval(() => {
        const kpiCards = document.querySelectorAll('.feature-card');
        kpiCards.forEach(card => {
            const timestamp = new Date().toLocaleTimeString();
            // In a real application, this would update with live data
            console.log(`KPI Update: ${timestamp}`);
        });
    }, 60000); // Update every minute

    // Add institutional ranking animation
    const rankingElement = document.querySelector('[style*="var(--accent-royal)"]');
    if (rankingElement) {
        rankingElement.parentElement.addEventListener('mouseenter', function() {
            this.style.transform = 'scale(1.05)';
            this.style.transition = 'all 0.3s ease';
        });
        
        rankingElement.parentElement.addEventListener('mouseleave', function() {
            this.style.transform = 'scale(1)';
        });
    }
});
</script>
{% endblock %}
