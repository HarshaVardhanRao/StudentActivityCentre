Creating test database for alias 'default'...
F
======================================================================
FAIL: test_student_visibility (tests.verify_members_visibility.MemberVisibilityTest.test_student_visibility)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/mnt/ntfs/Projects/StudentActivityCentre/SAC-Hub/tests/verify_members_visibility.py", line 50, in test_student_visibility
    self.assertNotIn("Manage Users", content, "Student should not see Manage Users section or link")
AssertionError: 'Manage Users' unexpectedly found in '\n\n\n<!DOCTYPE html>\n<html lang="en">\n\n<head>\n    <meta charset="UTF-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>Student Dashboard - MITS SAC Hub</title>\n\n    <!-- Fonts -->\n    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"\n        rel="stylesheet">\n\n    <!-- Tailwind -->\n    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>\n\n    <!-- Additional Styles -->\n    <link rel="stylesheet" href="/static/admin/calendar-styles.css">\n\n    <!-- SEO Meta -->\n    <meta name="description"\n        content="MITS Student Activity Centre - Manage clubs, events, and student activities professionally">\n    <meta name="keywords" content="MITS, SAC, Clubs, Events, Students">\n    <meta name="author" content="MITS SAC Team">\n\n    <!-- Favicon -->\n    <link rel="icon" type="image/x-icon"\n        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸŽ“</text></svg>">\n\n    \n</head>\n\n<body class="bg-gray-50 text-gray-800 font-inter">\n\n    <!-- â–¬â–¬â–¬â–¬â–¬ NAVIGATION BAR â–¬â–¬â–¬â–¬â–¬ -->\n    <header class="bg-white shadow-sm sticky top-0 z-50">\n        <div class="max-w-7xl mx-auto flex items-center justify-between py-4 px-6">\n\n            <!-- LEFT: Logo -->\n            <div class="flex items-center gap-3">\n                <img src="#" class="w-10 h-10" />\n                <span class="font-semibold text-lg">Student Activity Center</span>\n            </div>\n\n            <!-- CENTER NAV (Desktop) -->\n            <nav class="hidden md:flex items-center gap-8 font-medium">\n                <a href="/" class="hover:text-red-600 hover:scale-110 transition">Home</a>\n                <a href="/events/" class="hover:text-red-600 hover:scale-110 transition">Events</a>\n                <a href="/clubs/" class="hover:text-red-600 hover:scale-110 transition">Clubs</a>\n                <a href="/calendar/" class="hover:text-red-600 hover:scale-110 transition">Calendar</a>\n                <a href="/about/" class="hover:text-red-600 hover:scale-110 transition">About SAC</a>\n            </nav>\n\n            <!-- RIGHT SIDE -->\n            \n            <!-- Hamburger Menu -->\n            <div class="relative md:hidden">\n                <button id="menuBtn" class="p-2 rounded-lg hover:bg-gray-100 transition">\n                    <svg xmlns="http://www.w3.org/2000/svg" class="w-7 h-7" fill="none" viewBox="0 0 24 24"\n                        stroke="currentColor">\n                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"\n                            d="M4 6h16M4 12h16M4 18h16" />\n                    </svg>\n                </button>\n\n                <!-- Mobile Dropdown -->\n                <div id="mobileMenu" class="hidden absolute right-0 mt-2 w-40 bg-white shadow-lg rounded-lg py-2">\n                    <a href="/profile/" class="block px-4 py-2 hover:bg-gray-100">Profile</a>\n                    <a href="/logout/" class="block px-4 py-2 hover:bg-gray-100 text-red-600">Logout</a>\n                </div>\n            </div>\n\n            <!-- Desktop Profile Dropdown -->\n            <div class="hidden md:block relative">\n                <button id="profileBtn"\n                    class="flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 transition">\n                    <span>student_only</span>\n                    <img src="https://ui-avatars.com/api/?name=student_only&background=EF4444&color=fff"\n                        class="w-8 h-8 rounded-full">\n                </button>\n\n                <div id="profileMenu" class="hidden absolute right-0 mt-2 w-40 bg-white shadow-lg rounded-lg py-2">\n                    <a href="/profile/" class="block px-4 py-2 hover:bg-gray-100">Profile</a>\n                    <a href="/logout/" class="block px-4 py-2 hover:bg-gray-100 text-red-600">Logout</a>\n                </div>\n            </div>\n\n            \n        </div>\n    </header>\n\n    <!-- Mobile Dropdown Script -->\n    <script>\n        document.addEventListener("DOMContentLoaded", () => {\n\n            // Mobile Hamburger\n            const menuBtn = document.getElementById("menuBtn");\n            const mobileMenu = document.getElementById("mobileMenu");\n\n            if (menuBtn) {\n                menuBtn.onclick = () => {\n                    mobileMenu.classList.toggle("hidden");\n                };\n            }\n\n            // Desktop Profile Menu\n            const profileBtn = document.getElementById("profileBtn");\n            const profileMenu = document.getElementById("profileMenu");\n\n            if (profileBtn) {\n                profileBtn.onclick = () => profileMenu.classList.toggle("hidden");\n            }\n        });\n    </script>\n\n    <!-- PAGE CONTENT -->\n    \n<div class="flex min-h-screen bg-gray-50">\n    <!-- Sidebar -->\n    <aside class="w-64 bg-white shadow-lg fixed h-full z-10 hidden md:block">\n        <div class="p-6 border-b">\n            <div class="flex items-center gap-3">\n                <div\n                    class="w-10 h-10 bg-red-600 rounded-full flex items-center justify-center text-white font-bold text-xl">\n                    MITS\n                </div>\n                <span class="font-bold text-gray-800">SAC Hub</span>\n            </div>\n        </div>\n\n        <nav class="p-4 space-y-1 overflow-y-auto h-[calc(100vh-80px)]">\n            <div class="mb-6">\n                <p class="px-4 text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2">Main</p>\n                <a href="/"\n                    class="flex items-center gap-3 px-4 py-3 text-red-600 bg-red-50 rounded-lg font-medium transition-colors">\n                    <i class="bi bi-grid-fill"></i>\n                    Dashboard\n                </a>\n\n                \n                <a href="#manage-users-section"\n                    class="flex items-center gap-3 px-4 py-3 text-gray-600 hover:bg-gray-50 hover:text-gray-900 rounded-lg font-medium transition-colors">\n                    <i class="bi bi-person-badge"></i>\n                    Manage Users\n                </a>\n                \n\n                \n\n                <a href="/settings/"\n                    class="flex items-center gap-3 px-4 py-3 text-gray-600 hover:bg-gray-50 hover:text-gray-900 rounded-lg font-medium transition-colors">\n                    <i class="bi bi-gear"></i>\n                    Settings\n                </a>\n            </div>\n        </nav>\n    </aside>\n\n    <!-- Main Content -->\n    <main class="flex-1 md:ml-64 p-8">\n        <!-- Header -->\n        <div class="flex justify-between items-center mb-8">\n            <h1 class="text-2xl font-bold text-gray-800">Student Dashboard</h1>\n            <a href="/calendar/"\n                class="flex items-center gap-2 text-red-600 font-medium hover:text-red-700 transition-colors">\n                View Calendar <i class="bi bi-arrow-right"></i>\n            </a>\n        </div>\n\n        \n        <!-- Stats Cards -->\n        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">\n            <!-- Card 1: Total Clubs / My Clubs -->\n            <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100">\n                <div class="flex items-center justify-between mb-4">\n                    <div class="p-3 bg-blue-50 text-blue-600 rounded-lg">\n                        <i class="bi bi-people text-xl"></i>\n                    </div>\n                </div>\n                <p class="text-gray-500 font-medium mb-2">\n                    My Clubs\n                </p>\n                <h2 class="text-4xl font-bold text-gray-800 mb-4">1</h2>\n                <div class="flex items-center text-sm text-green-600">\n                    <i class="bi bi-arrow-up-right mr-1"></i>\n                    <!-- Placeholder trend -->\n                    <span>Active</span>\n                </div>\n            </div>\n\n            \n\n            <!-- Card 3: Total Students / Events Participated -->\n            <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100">\n                <div class="flex items-center justify-between mb-4">\n                    <div class="p-3 bg-purple-50 text-purple-600 rounded-lg">\n                        \n                        <i class="bi bi-calendar-check text-xl"></i>\n                        \n                    </div>\n                </div>\n                <p class="text-gray-500 font-medium mb-2">\n                    Events Participated\n                </p>\n                <h2 class="text-4xl font-bold text-gray-800">0</h2>\n                <div class="flex items-center text-sm text-gray-500 mt-4">\n                    <i class="bi bi-graph-up mr-1"></i>\n                    <span>Successfully attended</span>\n                </div>\n            </div>\n        </div>\n        <!-- My Club Dashboards Table -->\n        <div class="bg-white rounded-xl shadow-sm border border-gray-100 mb-8 overflow-hidden">\n            <div class="p-6 border-b border-gray-100">\n                <h3 class="text-lg font-bold text-gray-800">My Clubs</h3>\n            </div>\n            <div class="overflow-x-auto">\n                <table class="w-full text-left">\n                    <thead class="bg-gray-50 text-gray-500 text-sm">\n                        <tr>\n                            <th class="px-6 py-4 font-medium">#</th>\n                            <th class="px-6 py-4 font-medium">Club Name</th>\n                            <th class="px-6 py-4 font-medium">Description</th>\n                            <th class="px-6 py-4 font-medium">Faculty Advisor</th>\n                            <th class="px-6 py-4 font-medium">Actions</th>\n                        </tr>\n                    </thead>\n                    <tbody class="divide-y divide-gray-100">\n                        \n                        <tr class="hover:bg-gray-50 transition-colors">\n                            <td class="px-6 py-4 text-gray-500">1</td>\n                            <td class="px-6 py-4 font-medium text-gray-800">Test Club</td>\n                            <td class="px-6 py-4 text-gray-600">Test Desc</td>\n                            <td class="px-6 py-4 text-gray-600">None</td>\n                            <td class="px-6 py-4 text-gray-600"><a href="/clubs/1"\n                                    class="text-red-600 hover:underline">View</a></td>\n                        </tr>\n                        \n                    </tbody>\n                </table>\n            </div>\n        </div>\n\n        \n\n        <!-- SAC Coordinator Specifics -->\n        \n\n        <!-- Club Advisor Reports -->\n        \n\n        <!-- Completed Events (For Coordinators/SAC) -->\n        \n        <!-- My Events and Notifications Grid -->\n        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">\n            <!-- My Events -->\n            <div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden">\n                <div class="p-6 border-b border-gray-100 flex justify-between items-center">\n                    <h3 class="text-lg font-bold text-gray-800">My Events</h3>\n                    <a href="#" class="text-sm text-red-600 font-medium hover:text-red-700">View All</a>\n                </div>\n                <div class="overflow-x-auto">\n                    <table class="w-full text-left">\n                        <thead class="bg-gray-50 text-gray-500 text-sm">\n                            <tr>\n                                <th class="px-6 py-4 font-medium">Event</th>\n                                <th class="px-6 py-4 font-medium">Date</th>\n                                <th class="px-6 py-4 font-medium">Status</th>\n                            </tr>\n                        </thead>\n                        <tbody class="divide-y divide-gray-100">\n                            \n                            <tr>\n                                <td colspan="3" class="px-6 py-8 text-center text-gray-500">No registered events.</td>\n                            </tr>\n                            \n                        </tbody>\n                    </table>\n                </div>\n            </div>\n\n            <!-- Notifications -->\n            <div class="bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden">\n                <div class="p-6 border-b border-gray-100 flex justify-between items-center">\n                    <h3 class="text-lg font-bold text-gray-800">Notifications</h3>\n                    <a href="#" class="text-sm text-red-600 font-medium hover:text-red-700">View All</a>\n                </div>\n                <div class="divide-y divide-gray-100">\n                    \n                    <div class="p-8 text-center text-gray-500">No new notifications.</div>\n                    \n                </div>\n            </div>\n        </div>\n\n        \n    </main>\n</div>\n\n\n    <!-- FOOTER -->\n    <footer class="bg-white mt-16 border-t">\n        <div class="max-w-7xl mx-auto py-10 px-6 grid md:grid-cols-4 gap-6">\n\n            <div>\n                <h3 class="font-semibold text-lg">MITS</h3>\n                <p class="text-sm text-gray-600">Student Activity Center</p>\n            </div>\n\n            <div>\n                <h3 class="font-semibold">Links</h3>\n                <ul class="mt-2 text-sm text-gray-600">\n                    <li>Events Calendar</li>\n                    <li>Club Directory</li>\n                    <li>Leader Portal</li>\n                </ul>\n            </div>\n\n            <div>\n                <h3 class="font-semibold">Support</h3>\n                <ul class="mt-2 text-sm text-gray-600">\n                    <li>Email</li>\n                    <li>Start a New Club</li>\n                </ul>\n            </div>\n\n            <div>\n                <h3 class="font-semibold">Contact</h3>\n                <ul class="mt-2 text-sm text-gray-600">\n                    <li>Email: xxxxxxxxx</li>\n                    <li>Phone: xxxxxxxxx</li>\n                </ul>\n            </div>\n\n        </div>\n\n        <div class="text-center text-sm text-gray-500 py-4 border-t">\n            Â© 2025 Madanapalle Institute of Technology & Science. All rights reserved.\n        </div>\n    </footer>\n    \n</body>\n\n</html>' : Student should not see Manage Users section or link

----------------------------------------------------------------------
Ran 1 test in 1.538s

FAILED (failures=1)
Destroying test database for alias 'default'...
Found 1 test(s).
System check identified no issues (0 silenced).

Testing Student Member Visibility...
User Roles: [Role.STUDENT]
Context 'users' NOT FOUTD
Found 'Manage Users' at index 6120
Surrounding text: ass="bi bi-person-badge"></i>
                    Manage Users
                </a>
                
FAILURE: 'Manage Users' found in Student Dashboard
